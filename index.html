<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

  <!-- Critical: Preconnect with high priority for maximum performance -->
  <!-- PERF: Preconnect to Supabase API + Storage for instant image loading -->
  <link rel="preconnect" href="https://qegyisokrxdsszzswsqk.supabase.co" crossorigin>
  <link rel="dns-prefetch" href="https://qegyisokrxdsszzswsqk.supabase.co">

  <!-- Fonts - deferred priority -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- DNS Prefetch + Preconnect for faster third-party connections -->
  <link rel="dns-prefetch" href="https://storage.googleapis.com">
  <link rel="preconnect" href="https://storage.googleapis.com" crossorigin>


  <!-- CRITICAL CSS - Inlined for instant First Contentful Paint -->
  <style>
    /* Critical above-the-fold styles - prevents render blocking */
    *,
    *::before,
    *::after {
      box-sizing: border-box
    }

    html {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
      line-height: 1.5;
      -webkit-text-size-adjust: 100%;
      scroll-behavior: smooth
    }

    body {
      margin: 0;
      min-height: 100vh;
      min-height: 100dvh;
      background: #0a0a0a;
      color: #fafafa
    }

    #root {
      min-height: 100vh;
      min-height: 100dvh
    }

    /* Critical font-face declarations - prevent FOIT */
    @font-face {
      font-family: 'Inter';
      font-style: normal;
      font-weight: 400 600;
      font-display: swap;
      src: local('Inter'), local('Inter-Regular')
    }

    @font-face {
      font-family: 'Poppins';
      font-style: normal;
      font-weight: 600 800;
      font-display: swap;
      src: local('Poppins'), local('Poppins-SemiBold')
    }

    /* Clean splash loader — no animation complexity */
    .initial-loader {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #050505;
      z-index: 9999
    }

    .splash-logo {
      width: 96px;
      height: 96px;
      object-fit: contain;
      animation: splash-fade 0.4s ease-out both
    }

    @keyframes splash-fade {
      from {
        opacity: 0;
        transform: scale(0.92)
      }

      to {
        opacity: 1;
        transform: scale(1)
      }
    }
  </style>


  <!-- Load fonts asynchronously - not render blocking -->
  <link rel="preload" as="style"
    href="https://fonts.googleapis.com/css2?family=Quicksand:wght@600;700&family=Poppins:wght@600;700;800&family=Inter:wght@400;500;600&display=swap"
    onload="this.onload=null;this.rel='stylesheet'">
  <noscript>
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@600;700&family=Poppins:wght@600;700;800&family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet">
  </noscript>

  <title>Swipe to find the best deal</title>
  <meta name="description" content="Swipe to find the best deal or connect with the perfect client.
With Swipess, you can discover properties, vehicles, and services.">
  <meta name="author" content="Swipess" />
  <meta name="keywords" content="rental, property, tenant, apartment, house, real estate, matching, swipe for rentals">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://swipes.lovable.app/">


  <meta property="og:image"
    content="https://storage.googleapis.com/gpt-engineer-file-uploads/qyGlrqJHe9g2hyHsAc6ZZroRlyF2/social-images/social-1766875478037-image (2).jpg">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://swipes.lovable.app/">
  <meta property="twitter:title" content="Swipess - Find Your Perfect Rental Property or Tenant">
  <meta property="twitter:description"
    content="Discover your ideal rental property or tenant with Swipess. Swipe through verified listings and connect with perfect matches.">
  <meta property="twitter:image"
    content="https://storage.googleapis.com/gpt-engineer-file-uploads/qyGlrqJHe9g2hyHsAc6ZZroRlyF2/social-images/social-1758515231924-ChatGPT Image Sep 21, 2025, 11_01_12 PM.png">

  <!-- PWA Support -->
  <link rel="manifest" href="/manifest.webmanifest">
  <meta name="theme-color" content="#ff69b4">

  <!-- iOS/Safari PWA Support - Comprehensive Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Swipess">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-touch-fullscreen" content="yes">

  <!-- PWA Icons - Essential sizes only (NEW S Icon) -->
  <link rel="icon" type="image/jpeg" href="/icons/s-icon.jpg">
  <link rel="apple-touch-icon" href="/icons/s-icon.jpg">
  <link rel="apple-touch-icon" sizes="192x192" href="/icons/s-icon.jpg">
  <link rel="apple-touch-icon" sizes="512x512" href="/icons/s-icon.jpg">

  <!-- Capacitor iOS -->
  <meta name="supported-color-schemes" content="light dark">
  <meta name="color-scheme" content="light dark">

  <!-- Security Headers -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://accounts.google.com https://apis.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: blob: https://*.supabase.co https://storage.googleapis.com https://*.googleusercontent.com; connect-src 'self' https://*.supabase.co wss://*.supabase.co https://accounts.google.com https://storage.googleapis.com; frame-src https://accounts.google.com;">
  <link rel="icon" type="image/jpeg" sizes="32x32" href="/icons/s-icon.jpg">

  <!-- Reduced Motion: apply class when user prefers reduced motion -->
  <script>
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      document.documentElement.classList.add('reduce-motion');
    }
  </script>

  <!-- Early redirect hint for authenticated users - reduces redirect latency -->
  <script>
    // Check for cached auth state to avoid redirect delay
    (function () {
      try {
        var authKey = Object.keys(localStorage).find(function (k) { return k.startsWith('sb-') && k.endsWith('-auth-token'); });
        if (authKey) {
          var auth = JSON.parse(localStorage.getItem(authKey));
          if (auth && auth.access_token) {
            // User is likely authenticated - preload dashboard resources
            var link = document.createElement('link');
            link.rel = 'prefetch';
            link.href = '/client/dashboard';
            link.as = 'document';
            document.head.appendChild(link);
          }
        }
      } catch (e) { }
    })();
  </script>
</head>

<body>
  <!-- Clean logo splash — removed when React mounts -->
  <div id="root">
    <div class="initial-loader" id="initial-loader">
      <img class="splash-logo" src="/icons/swipess-logo-new.png" alt="Swipess" />
    </div>
  </div>

  <!-- Main application script - loaded at end of body for non-blocking render -->
  <script type="module" src="/src/main.tsx"></script>

  <!-- Defer cache cleanup until after main content loads -->
  <script>
    // Cache cleanup for legacy cache names (runs during idle time)
    const cleanupCaches = () => {
      try {
        if (localStorage.getItem('swipes_last_clear') !== '3.0.0') {
          if ('caches' in window) {
            caches.keys().then((names) => {
              names.forEach((name) => {
                if (name.startsWith('swipes-') || name.startsWith('swipematch-') || name.startsWith('tinderent-')) {
                  caches.delete(name);
                }
              });
            });
          }
          localStorage.setItem('swipes_last_clear', '3.0.0');
        }
      } catch { }
    };

    // Defer cleanup to not block critical rendering
    if ('requestIdleCallback' in window) {
      requestIdleCallback(cleanupCaches, { timeout: 5000 });
    } else {
      setTimeout(cleanupCaches, 3000);
    }
  </script>
</body>

</html>